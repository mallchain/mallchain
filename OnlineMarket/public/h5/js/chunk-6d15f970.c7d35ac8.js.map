{"version":3,"sources":["webpack:///./src/views/shop/GoodsEvaluate.vue?5a32","webpack:///./src/utils/validate.js","webpack:///./src/views/shop/GoodsEvaluate.vue?d647","webpack:///src/views/shop/GoodsEvaluate.vue","webpack:///./src/views/shop/GoodsEvaluate.vue?09f3","webpack:///./src/views/shop/GoodsEvaluate.vue"],"names":["bindMessage","fn","message","field","replace","required","opt","type","url","email","alpha","attrs","pattern","alpha_dash","alpha_num","num","chs","chs_alpha","chs_alpha_num","chs_dash","chs_phone","baseAttr","min","max","length","range","Object","keys","reduce","key","attr","_attr","render","_vm","this","_h","$createElement","_c","_self","staticClass","orderCon","productInfo","image","_v","_s","store_name","price","cart_num","_e","_l","item","indexw","name","itemn","indexn","class","index","on","$event","stars","directives","rawName","value","expression","domProps","target","composing","expect","uploadPictures","splice","headers","imageuploaded","submit","staticRenderFns","NAME","components","VueCoreImageUpload","props","data","cartProduct","scoreList","$store","state","app","token","unique","$route","params","id","mounted","getOrderProduct","watch","n","$set","methods","that","res","status","push","component"],"mappings":"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","file":"h5/js/chunk-6d15f970.c7d35ac8.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GoodsEvaluate.vue?vue&type=style&index=0&id=6d987580&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GoodsEvaluate.vue?vue&type=style&index=0&id=6d987580&scoped=true&lang=css&\"","const bindMessage = (fn, message) => {\r\n  fn.message = field => message.replace(\"%s\", field || \"\");\r\n};\r\n\r\nexport function required(message, opt = {}) {\r\n  return {\r\n    required: true,\r\n    message,\r\n    type: \"string\",\r\n    ...opt\r\n  };\r\n}\r\n\r\nbindMessage(required, \"请输入%s\");\r\n\r\nexport function url(message, opt = {}) {\r\n  return {\r\n    type: \"url\",\r\n    message,\r\n    ...opt\r\n  };\r\n}\r\n\r\nbindMessage(url, \"请输入正确的链接\");\r\n\r\nexport function email(message, opt = {}) {\r\n  return {\r\n    type: \"email\",\r\n    message,\r\n    ...opt\r\n  };\r\n}\r\n\r\nbindMessage(email, \"请输入正确的邮箱地址\");\r\n\r\n/**\r\n * 验证字段必须完全由字母构成。\r\n *\r\n * @param message\r\n * @returns {*}\r\n */\r\nexport function alpha(message) {\r\n  return attrs.pattern(/^[\\w]+$/, message);\r\n}\r\n\r\nbindMessage(alpha, \"%s必须是字母\");\r\n\r\n/**\r\n * 只能包含由字母、数字，以及 - 和 _\r\n *\r\n * @param message\r\n * @returns {*}\r\n */\r\nexport function alpha_dash(message) {\r\n  return attrs.pattern(/^[\\w\\d_-]+$/, message);\r\n}\r\n\r\nbindMessage(alpha_dash, \"%s只能包含由字母、数字，以及 - 和 _\");\r\n\r\n/**\r\n * 必须是完全是字母、数字\r\n *\r\n * @param message\r\n * @returns {*}\r\n */\r\nexport function alpha_num(message) {\r\n  return attrs.pattern(/^[\\w\\d]+$/, message);\r\n}\r\n\r\nbindMessage(alpha_num, \"%s只能包含字母、数字\");\r\n/**\r\n * 正确的金额\r\n *\r\n * @param message\r\n * @returns {*}\r\n */\r\nexport function num(message) {\r\n  return attrs.pattern(\r\n    /(^[1-9]([0-9]+)?(\\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\\.[0-9]([0-9])?$)/,\r\n    message\r\n  );\r\n}\r\n\r\nbindMessage(num, \"%s格式不正确\");\r\n\r\n/**\r\n * 只能是汉字\r\n * @param message\r\n * @returns {*}\r\n */\r\nexport function chs(message) {\r\n  return attrs.pattern(/^[\\u4e00-\\u9fa5]+$/, message);\r\n}\r\n\r\nbindMessage(chs, \"%s只能是汉字\");\r\n\r\n/**\r\n * 只能包含汉字、字母\r\n * @param message\r\n * @returns {*}\r\n */\r\nexport function chs_alpha(message) {\r\n  return attrs.pattern(/^[\\u4e00-\\u9fa5\\w]+$/, message);\r\n}\r\n\r\nbindMessage(chs_alpha, \"%s只能包含汉字、字母\");\r\n\r\n/**\r\n * 只能包含汉字、字母和数字\r\n * @param message\r\n * @returns {*}\r\n */\r\nexport function chs_alpha_num(message) {\r\n  return attrs.pattern(/^[\\u4e00-\\u9fa5\\w\\d]+$/, message);\r\n}\r\n\r\nbindMessage(chs_alpha_num, \"%s只能包含汉字、字母和数字\");\r\n\r\n/**\r\n * 只能包含由汉字、字母、数字，以及 - 和 _\r\n * @param message\r\n * @returns {*}\r\n */\r\nexport function chs_dash(message) {\r\n  return attrs.pattern(/^[\\u4e00-\\u9fa5\\w\\d-_]+$/, message);\r\n}\r\n\r\nbindMessage(chs_dash, \"%s只能包含由汉字、字母、数字，以及 - 和 _\");\r\n\r\n/**\r\n * 手机号验证\r\n * @param message\r\n * @returns {*}\r\n */\r\nexport function chs_phone(message) {\r\n  return attrs.pattern(/^1(3|4|5|7|8|9|6)\\d{9}$/i, message);\r\n}\r\nbindMessage(chs_phone, \"请输入正确的手机号码\");\r\n\r\nconst baseAttr = {\r\n  min: \"%s最小长度为:min\",\r\n  max: \"%s最大长度为:max\",\r\n  length: \"%s长度必须为:length\",\r\n  range: \"%s长度为:range\",\r\n  pattern: \"$s格式错误\"\r\n};\r\n\r\nconst attrs = Object.keys(baseAttr).reduce((attrs, key) => {\r\n  attrs[key] = (attr, message = \"\", opt = {}) => {\r\n    const _attr =\r\n      key === \"range\" ? { min: attr[0], max: attr[1] } : { [key]: attr };\r\n\r\n    return {\r\n      message: message.replace(\r\n        `:${key}`,\r\n        key === \"range\" ? `${attr[0]}-${attr[1]}` : attr\r\n      ),\r\n      type: \"string\",\r\n      ..._attr,\r\n      ...opt\r\n    };\r\n  };\r\n  bindMessage(attrs[key], baseAttr[key]);\r\n  return attrs;\r\n}, {});\r\n\r\nexport default attrs;\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"evaluate-con\"},[(_vm.orderCon.productInfo)?_c('div',{staticClass:\"goodsStyle acea-row row-between\"},[_c('div',{staticClass:\"pictrue\"},[_c('img',{staticClass:\"image\",attrs:{\"src\":_vm.orderCon.productInfo.image}})]),_c('div',{staticClass:\"text acea-row row-between\"},[_c('div',{staticClass:\"name line2\"},[_vm._v(\" \"+_vm._s(_vm.orderCon.productInfo.store_name)+\" \")]),_c('div',{staticClass:\"money\"},[_c('div',[_vm._v(\"￥\"+_vm._s(_vm.orderCon.productInfo.price))]),_c('div',{staticClass:\"num\"},[_vm._v(\"x\"+_vm._s(_vm.orderCon.cart_num))])])])]):_vm._e(),_c('div',{staticClass:\"score\"},[_vm._l((_vm.scoreList),function(item,indexw){return _c('div',{key:indexw,staticClass:\"item acea-row row-middle\"},[_c('div',[_vm._v(_vm._s(item.name))]),_c('div',{staticClass:\"starsList\"},_vm._l((item.stars),function(itemn,indexn){return _c('span',{key:indexn,staticClass:\"iconfont\",class:item.index >= indexn\n              ? 'icon-shitixing font-color-red'\n              : 'icon-kongxinxing',on:{\"click\":function($event){return _vm.stars(indexn, indexw)}}})}),0),_c('span',{staticClass:\"evaluate\"},[_vm._v(_vm._s(item.index === -1 ? \"\" : item.index + 1 + \"分\"))])])}),_c('div',{staticClass:\"textarea\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.expect),expression:\"expect\"}],attrs:{\"placeholder\":\"商品满足你的期待么？说说你的想法，分享给想买的他们吧~\"},domProps:{\"value\":(_vm.expect)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.expect=$event.target.value}}}),_c('div',{staticClass:\"list acea-row row-middle\"},[_vm._l((_vm.uploadPictures),function(item,index){return _c('div',{key:index,staticClass:\"pictrue\"},[_c('img',{attrs:{\"src\":item}}),_c('span',{staticClass:\"iconfont icon-guanbi1 font-color-red\",on:{\"click\":function($event){return _vm.uploadPictures.splice(index, 1)}}})])}),(_vm.uploadPictures.length < 8)?_c('VueCoreImageUpload',{staticClass:\"btn btn-primary\",attrs:{\"crop\":false,\"compress\":\"80\",\"headers\":_vm.headers,\"max-file-size\":5242880,\"credentials\":false,\"inputAccept\":\"image/*\",\"inputOfFile\":\"file\",\"url\":_vm.url},on:{\"imageuploaded\":_vm.imageuploaded}},[_c('div',{staticClass:\"pictrue uploadBnt acea-row row-center-wrapper row-column\"},[_c('span',{staticClass:\"iconfont icon-icon25201\"}),_c('div',[_vm._v(\"上传图片\")])])]):_vm._e()],2)]),_c('div',{staticClass:\"evaluateBnt bg-color-red\",on:{\"click\":_vm.submit}},[_vm._v(\"立即评价\")])],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"evaluate-con\">\r\n    <div class=\"goodsStyle acea-row row-between\" v-if=\"orderCon.productInfo\">\r\n      <div class=\"pictrue\">\r\n        <img :src=\"orderCon.productInfo.image\" class=\"image\" />\r\n      </div>\r\n      <div class=\"text acea-row row-between\">\r\n        <div class=\"name line2\">\r\n          {{ orderCon.productInfo.store_name }}\r\n        </div>\r\n        <div class=\"money\">\r\n          <div>￥{{ orderCon.productInfo.price }}</div>\r\n          <div class=\"num\">x{{ orderCon.cart_num }}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"score\">\r\n      <div\r\n        class=\"item acea-row row-middle\"\r\n        v-for=\"(item, indexw) in scoreList\"\r\n        :key=\"indexw\"\r\n      >\r\n        <div>{{ item.name }}</div>\r\n        <div class=\"starsList\">\r\n          <span\r\n            @click=\"stars(indexn, indexw)\"\r\n            v-for=\"(itemn, indexn) in item.stars\"\r\n            :key=\"indexn\"\r\n            class=\"iconfont\"\r\n            :class=\"\r\n              item.index >= indexn\r\n                ? 'icon-shitixing font-color-red'\r\n                : 'icon-kongxinxing'\r\n            \"\r\n          ></span>\r\n        </div>\r\n        <span class=\"evaluate\">{{\r\n          item.index === -1 ? \"\" : item.index + 1 + \"分\"\r\n        }}</span>\r\n      </div>\r\n      <div class=\"textarea\">\r\n        <textarea\r\n          placeholder=\"商品满足你的期待么？说说你的想法，分享给想买的他们吧~\"\r\n          v-model=\"expect\"\r\n        ></textarea>\r\n        <div class=\"list acea-row row-middle\">\r\n          <div\r\n            class=\"pictrue\"\r\n            v-for=\"(item, index) in uploadPictures\"\r\n            :key=\"index\"\r\n          >\r\n            <img :src=\"item\" />\r\n            <span\r\n              class=\"iconfont icon-guanbi1 font-color-red\"\r\n              @click=\"uploadPictures.splice(index, 1)\"\r\n            ></span>\r\n          </div>\r\n          <VueCoreImageUpload\r\n            class=\"btn btn-primary\"\r\n            :crop=\"false\"\r\n            compress=\"80\"\r\n            @imageuploaded=\"imageuploaded\"\r\n            :headers=\"headers\"\r\n            :max-file-size=\"5242880\"\r\n            :credentials=\"false\"\r\n            inputAccept=\"image/*\"\r\n            inputOfFile=\"file\"\r\n            :url=\"url\"\r\n            v-if=\"uploadPictures.length < 8\"\r\n          >\r\n            <div\r\n              class=\"pictrue uploadBnt acea-row row-center-wrapper row-column\"\r\n            >\r\n              <span class=\"iconfont icon-icon25201\"></span>\r\n              <div>上传图片</div>\r\n            </div>\r\n          </VueCoreImageUpload>\r\n        </div>\r\n      </div>\r\n      <div class=\"evaluateBnt bg-color-red\" @click=\"submit\">立即评价</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style scoped>\r\n.evaluate-con .score .textarea .list .pictrue.uploadBnt {\r\n  border: 1px solid #ddd;\r\n}\r\n</style>\r\n<script>\r\nimport { postOrderProduct, postOrderComment } from \"@api/store\";\r\nimport { trim, VUE_APP_API_URL } from \"@utils\";\r\nimport { required } from \"@utils/validate\";\r\nimport VueCoreImageUpload from \"vue-core-image-upload\";\r\nimport { validatorDefaultCatch } from \"@utils/dialog\";\r\n\r\nconst NAME = \"GoodsEvaluate\";\r\n\r\nexport default {\r\n  name: NAME,\r\n  components: {\r\n    VueCoreImageUpload\r\n  },\r\n  props: {},\r\n  data: function() {\r\n    return {\r\n      orderCon: {\r\n        cartProduct: {\r\n          productInfo: {}\r\n        }\r\n      },\r\n      scoreList: [\r\n        {\r\n          name: \"商品质量\",\r\n          stars: [\"\", \"\", \"\", \"\", \"\"],\r\n          index: -1\r\n        },\r\n        {\r\n          name: \"服务态度\",\r\n          stars: [\"\", \"\", \"\", \"\", \"\"],\r\n          index: -1\r\n        }\r\n      ],\r\n      url: `${VUE_APP_API_URL}/upload/image`,\r\n      headers: {\r\n        \"Authori-zation\": \"Bearer \" + this.$store.state.app.token\r\n      },\r\n      uploadPictures: [],\r\n      expect: \"\",\r\n      unique: this.$route.params.id\r\n    };\r\n  },\r\n  mounted: function() {\r\n    this.getOrderProduct();\r\n  },\r\n  watch: {\r\n    $route(n) {\r\n      if (n.name === NAME && this.unique !== n.params.id) {\r\n        this.unique = n.params.id;\r\n        this.$set(this.scoreList[0], \"index\", -1);\r\n        this.$set(this.scoreList[1], \"index\", -1);\r\n        this.expect = \"\";\r\n        this.uploadPictures = [];\r\n        this.getOrderProduct();\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    getOrderProduct: function() {\r\n      let that = this,\r\n        unique = that.unique;\r\n      postOrderProduct(unique).then(res => {\r\n        that.orderCon = res.data;\r\n      });\r\n    },\r\n    stars: function(indexn, indexw) {\r\n      this.scoreList[indexw].index = indexn;\r\n    },\r\n    imageuploaded(res) {\r\n      if (res.status !== 200)\r\n        return this.$dialog.error(res.msg || \"上传图片失败\");\r\n      this.uploadPictures.push(res.data.url);\r\n    },\r\n    async submit() {\r\n      const expect = trim(this.expect),\r\n        product_score =\r\n          this.scoreList[0].index + 1 === 0 ? \"\" : this.scoreList[0].index + 1,\r\n        service_score =\r\n          this.scoreList[1].index + 1 === 0 ? \"\" : this.scoreList[1].index + 1;\r\n      try {\r\n        await this.$validator({\r\n          product_score: [\r\n            required(\"请选择商品质量分数\", {\r\n              type: \"number\"\r\n            })\r\n          ],\r\n          service_score: [\r\n            required(\"请选择服务态度分数\", {\r\n              type: \"number\"\r\n            })\r\n          ]\r\n        }).validate({ product_score, service_score });\r\n      } catch (e) {\r\n        return validatorDefaultCatch(e);\r\n      }\r\n      postOrderComment({\r\n        product_score: product_score,\r\n        service_score: service_score,\r\n        unique: this.unique,\r\n        pics: this.uploadPictures.join(\",\"),\r\n        comment: expect\r\n      })\r\n        .then(() => {\r\n          this.$dialog.success(\"评价成功\");\r\n          this.$router.replace({\r\n            path: \"/order/detail/\" + this.orderCon.order_id\r\n          });\r\n        })\r\n        .catch(res => {\r\n          this.$dialog.error(res.msg);\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GoodsEvaluate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GoodsEvaluate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GoodsEvaluate.vue?vue&type=template&id=6d987580&scoped=true&\"\nimport script from \"./GoodsEvaluate.vue?vue&type=script&lang=js&\"\nexport * from \"./GoodsEvaluate.vue?vue&type=script&lang=js&\"\nimport style0 from \"./GoodsEvaluate.vue?vue&type=style&index=0&id=6d987580&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6d987580\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}